<div class="card mb-3">
  <div class="card-header">
    <h6 class="mb-0">
      <i class="bi bi-person-circle"></i>
      {{ current_user.get_display_name() }}
    </h6>
  </div>
  <div class="card-body text-center py-3">
    {% if current_user.profile_image_path %}
      <img src="{{ url_for('main.profile_image') }}" alt="Profile" class="rounded-circle mb-2" style="width:120px;height:120px;object-fit:cover;">
    {% else %}
      <div class="bg-secondary rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 60px; height: 60px; font-size: 1.5rem; color: white;">
        {{ current_user.username[0].upper() }}
      </div>
    {% endif %}
    <p class="mb-1 small text-muted">@{{ current_user.username }}</p>
    <span class="badge bg-{{ 'primary' if current_user.role.name == 'ADMIN' else 'secondary' }} mb-0">
      {{ current_user.role.name.title() }}
    </span>
  </div>
</div>

<!-- Profile Section -->
<div class="card mb-3">
  <div class="card-header">
    <h6 class="mb-0">
      <i class="bi bi-person"></i>
      Profile
    </h6>
  </div>
  <div class="list-group list-group-flush">
    <a href="{{ url_for('main.profile') }}" class="list-group-item list-group-item-action {% if active=='profile' %}active{% endif %}">
      <i class="bi bi-info-circle"></i> Personal Info
    </a>
    <a href="{{ url_for('main.account_info') }}" class="list-group-item list-group-item-action {% if active=='account' %}active{% endif %}">
      <i class="bi bi-envelope"></i> Email & Username
    </a>
    <a href="{{ url_for('main.account_tier') }}" class="list-group-item list-group-item-action {% if active=='tier' %}active{% endif %}">
      <i class="bi bi-star"></i> Subscription Tier
    </a>
  </div>
</div>

<!-- Settings Section -->
<div class="card mb-3">
  <div class="card-header">
    <h6 class="mb-0">
      <i class="bi bi-gear"></i>
      Settings
    </h6>
  </div>
  <div class="list-group list-group-flush">
    <a href="{{ url_for('main.account_notifications') }}" class="list-group-item list-group-item-action {% if active=='notifications' %}active{% endif %}">
      <i class="bi bi-bell"></i> Notifications
    </a>
  </div>
</div>

<!-- Security Section -->
<div class="card mb-3">
  <div class="card-header">
    <h6 class="mb-0">
      <i class="bi bi-shield-check"></i>
      Security & Privacy
    </h6>
  </div>
  <div class="list-group list-group-flush">
    <a href="{{ url_for('main.account_security') }}" class="list-group-item list-group-item-action {% if active=='security' %}active{% endif %}">
      <i class="bi bi-key"></i> Password & Auth
    </a>
    <a href="{{ url_for('main.account_privacy') }}" class="list-group-item list-group-item-action {% if active=='privacy' %}active{% endif %}">
      <i class="bi bi-eye-slash"></i> Privacy
    </a>
    <a href="{{ url_for('main.account_sessions') }}" class="list-group-item list-group-item-action {% if active=='sessions' %}active{% endif %}">
      <i class="bi bi-clock-history"></i> Active Sessions
    </a>
  </div>
</div>

<!-- Integrations Section -->
<div class="card mb-3">
  <div class="card-header">
    <h6 class="mb-0">
      <i class="bi bi-link-45deg"></i>
      Integrations
    </h6>
  </div>
  <div class="list-group list-group-flush">
    <a href="{{ url_for('main.account_integrations') }}" class="list-group-item list-group-item-action {% if active=='integrations' %}active{% endif %}">
      <i class="bi bi-plug"></i> Connected Services
    </a>
  </div>
</div>

<!-- Team Section (if applicable) -->
{% if current_user.role.name == 'ADMIN' %}
<div class="card mb-3">
  <div class="card-header">
    <h6 class="mb-0">
      <i class="bi bi-people"></i>
      Team
    </h6>
  </div>
  <div class="list-group list-group-flush">
    <a href="{{ url_for('main.teams_list') }}" class="list-group-item list-group-item-action">
      <i class="bi bi-people"></i> My Teams
    </a>
  </div>
</div>
{% endif %}

<!-- Danger Zone -->
<div class="card border-danger">
  <div class="card-header bg-danger bg-opacity-10 border-danger">
    <h6 class="mb-0 text-danger">
      <i class="bi bi-exclamation-triangle"></i>
      Danger Zone
    </h6>
  </div>
  <div class="list-group list-group-flush">
    <a href="{{ url_for('main.account_danger') }}" class="list-group-item list-group-item-action text-danger {% if active=='danger' %}active{% endif %}">
      <i class="bi bi-trash"></i> Delete Account
    </a>
  </div>
</div>
